{"version":3,"file":"static/js/560.4668fc72.chunk.js","mappings":"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","sources":["webpack://social-media/./src/pages/Users/Users.module.css?cf61","webpack://social-media/./src/components/Paginator/Paginator.module.css?d053","components/Paginator/Paginator.tsx","pages/Users/Users.tsx","pages/Users/hooks/useUsers.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"userPhoto\":\"Users_userPhoto__zMHfg\"};","// extracted by mini-css-extract-plugin\nexport default {\"paginator\":\"Paginator_paginator__AZ77d\",\"page\":\"Paginator_page__9HzCF\",\"selectedPage\":\"Paginator_selectedPage__sCCqZ\",\"button\":\"Paginator_button__igSFO\"};","import { useEffect, useState } from \"react\"\r\nimport s from \"./Paginator.module.css\"\r\n\r\nexport const Paginator = (props: PaginatorProps) => {\r\n  const [firstPaginatorPage, setFirstPaginatorPage] = useState(\r\n    Math.floor(props.currentPage / 10) * 10 + 1\r\n  )\r\n  const pagesCount = Math.ceil(props.totalItemsCount / props.pageSize)\r\n  const pages = []\r\n\r\n  useEffect(() => {\r\n    setFirstPaginatorPage(Math.floor(props.currentPage / 10) * 10 + 1)\r\n  }, [props.currentPage])\r\n\r\n  for (let i = firstPaginatorPage; i < firstPaginatorPage + 10; i++) {\r\n    if (i > pagesCount) {\r\n      break\r\n    }\r\n    pages.push(\r\n      <span\r\n        onClick={() => props.onPageChange(i)}\r\n        key={i}\r\n        className={s.page + (props.currentPage === i ? \" \" + s.selectedPage : \"\")}\r\n      >\r\n        {i}\r\n      </span>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={s.paginator}>\r\n      <button\r\n        onClick={() => setFirstPaginatorPage(firstPaginatorPage - 10)}\r\n        disabled={firstPaginatorPage === 1}\r\n        className={s.button}\r\n      >\r\n        prev\r\n      </button>\r\n      {pages}\r\n      <div>\r\n        <button\r\n          onClick={() => setFirstPaginatorPage(firstPaginatorPage + 10)}\r\n          disabled={firstPaginatorPage + 10 >= pagesCount}\r\n          className={s.button}\r\n        >\r\n          next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// types\r\ntype PaginatorProps = {\r\n  totalItemsCount: number\r\n  pageSize: number\r\n  currentPage: number\r\n  onPageChange: (page: number) => void\r\n}\r\n","import { NavLink } from \"react-router-dom\"\r\nimport userPhoto from \"../../assets/images/userDefaultPhoto.png\"\r\nimport s from \"./Users.module.css\"\r\nimport { Preloader } from \"../../components/Preloader/Preloader\"\r\nimport { useUsers } from \"./hooks/useUsers\"\r\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\"\r\nimport { Paginator } from \"../../components/Paginator/Paginator\"\r\n\r\nconst Users = withAuthRedirect(() => {\r\n  const {\r\n    currentPage,\r\n    totalUsersCount,\r\n    pageSize,\r\n    users,\r\n    isFollowingInProgress,\r\n    followOnClick,\r\n    unfollowOnClick,\r\n    onPageChange,\r\n    isFetching,\r\n  } = useUsers()\r\n\r\n  if (isFetching) {\r\n    return <Preloader />\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Paginator\r\n        currentPage={currentPage}\r\n        totalItemsCount={totalUsersCount}\r\n        pageSize={pageSize}\r\n        onPageChange={onPageChange}\r\n      />\r\n      {users.map((u) => {\r\n        const isDisabled = isFollowingInProgress.some((id) => id === u.id)\r\n\r\n        return (\r\n          <div key={u.id}>\r\n            <div>\r\n              <NavLink to={\"/profile/\" + u.id.toString()}>\r\n                <img src={u.photos.small || userPhoto} alt=\"avatar\" className={s.userPhoto} />\r\n              </NavLink>\r\n            </div>\r\n\r\n            <div>\r\n              {u.followed ? (\r\n                <button onClick={() => unfollowOnClick(u.id)} disabled={isDisabled}>\r\n                  unfollow\r\n                </button>\r\n              ) : (\r\n                <button onClick={() => followOnClick(u.id)} disabled={isDisabled}>\r\n                  follow\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div>{u.name}</div>\r\n            <div>{u.status}</div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Users\r\n","import { useEffect } from \"react\"\r\nimport { useAppDispatch, useAppSelector } from \"../../../redux/store\"\r\nimport { getUsers, follow, unfollow } from \"../../../redux/usersReducer/usersReducer\"\r\n\r\nexport const useUsers = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { pageSize, totalUsersCount, currentPage, isFollowingInProgress, isFetching, users } =\r\n    useAppSelector((state) => state.users)\r\n\r\n  useEffect(() => {\r\n    dispatch(getUsers({ pageSize, currentPage }))\r\n  }, [])\r\n\r\n  const onPageChange = (pageNumber: number) => {\r\n    dispatch(getUsers({ pageSize, currentPage: pageNumber }))\r\n  }\r\n  const followOnClick = (userId: number) => {\r\n    dispatch(follow(userId))\r\n  }\r\n  const unfollowOnClick = (userId: number) => {\r\n    dispatch(unfollow(userId))\r\n  }\r\n\r\n  return {\r\n    currentPage,\r\n    totalUsersCount,\r\n    pageSize,\r\n    users,\r\n    isFollowingInProgress,\r\n    followOnClick,\r\n    unfollowOnClick,\r\n    onPageChange,\r\n    isFetching,\r\n  }\r\n}\r\n"],"names":["Paginator","props","firstPaginatorPage","setFirstPaginatorPage","useState","Math","floor","currentPage","pagesCount","ceil","totalItemsCount","pageSize","pages","useEffect","i","push","_jsx","onClick","onPageChange","className","s","children","_jsxs","disabled","withAuthRedirect","totalUsersCount","users","isFollowingInProgress","followOnClick","unfollowOnClick","isFetching","useUsers","dispatch","useAppDispatch","useAppSelector","state","getUsers","userId","follow","unfollow","pageNumber","Preloader","map","u","isDisabled","some","id","NavLink","to","toString","src","photos","small","userPhoto","alt","followed","name","status"],"sourceRoot":""}